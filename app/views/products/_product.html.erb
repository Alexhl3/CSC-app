<%= link_to product_path(product.id), class: 'product', 'data-turbo-frame': '_top' do %>
  <div class="min-h-full duration-200 ease-out rounded-md bg-slg 800 w-80 hover:scale-105 drop-shadow">
    <div class="bg-white rounded-md min-h-80">
      <%= image_tag product.photo, class: "object-scale-down w-full h-80 rounded-t-lg" if product.photo.attached? %>
      <% if product.discount %>
        <div data-aos="zoom-out" data-aos-duration="700" data-aos-delay="200" class="absolute right-0 flex items-center justify-center w-1/5 bg-red-500 rounded-l-lg h-9 top-4">
          <h1 class="font-bold text-center text-white"><%= "-#{product.discount_percent}%" %></h1>
        </div>
      <% end %>
    </div>
    <div class="flex flex-row">
      <% if product.status %>
        <div class="p-1">
          <div class="px-1 text-white rounded-md bg-dgreen w-max"><%= t('.new')%></div>
        </div>
      <% else %>
        <div class="p-1">
          <div class="px-1 text-white rounded-md bg-dgreen w-max"><%= t('.old')%></div>
        </div>
      <% end %>
      <% if product.iva_status %>
        <div class="p-1 ml-auto">
          <div class="px-1 text-white rounded-md w-max bg-dgreen">
            <%= t('.iva')%>
          </div>
        </div>
      <% end %>
    </div>
    <div class="text-center">
      <h2 class="text-lg font-semibold text-bgray"><%= product.title %></h2>
      <div class="flex flex-col">
        <% if product.discount %>
          <span class="text-sm font-normal text-red-700 line-through">$<%= product.price.to_s.reverse.scan(/.{1,3}/).join('.').reverse %></span>
          <span class="text-base font-medium text-red-700">$<%= (product.price-(product.price*((product.discount_percent.to_f)/100))).truncate.to_s.reverse.scan(/.{1,3}/).join('.').reverse%></span>
        <% else %>
          <span class="text-base font-medium text-red-700">$<%= product.price.to_s.reverse.scan(/.{1,3}/).join('.').reverse %></span>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
